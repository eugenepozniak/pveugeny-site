<!DOCTYPE html>
<html lang="en" >
<head>
<meta charset="UTF-8">
<title></title>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css'>
<style>
@import url('https://fonts.cdnfonts.com/css/chalkduster');
@import url('https://fonts.cdnfonts.com/css/tellural');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --HEADER-BGCOLOR: rgba(0,0,0,0);
    --HEADER-COLOR: navy;
    --bs-font-sans-serif: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

html {
  font-size: 2.8vh;
  font-family: var(--bs-font-sans-serif);
}

body {
    background-color: midnightblue;
    background-image: linear-gradient(180deg, lightblue, white);
    min-height: 100vh;
    display: flex;
    flex-flow: column nowrap;
}

header {
    color: var(--HEADER-COLOR);
    position: sticky;
    height: 2.8vh;
    max-height: 2.8vh;
    top: 0;
    z-index: 1;
}

.clip {
  font-family: "Goudy Bookletter 1911", sans-serif;
  letter-spacing: 5px;
  font-weight: 800;
  font-size: 5vh;
  text-align: top;
  /*background: linear-gradient(135deg, orange 60%, cyan);*/
  background-image: url("img/scenic-2200x1331.png");
  background-size: 100%;
  margin-top: 0.5vh;
  margin-left: 1.2vh;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.clip:hover {
  text-decoration: none;
  color: transparent;
}

.clip:focus {
  text-decoration: none;
  color: transparent;
}

#page-header {
  display: flex;
  flex-direction:row-reverse;
}

#donate-panel {
    position: absolute;
    top: 0vh;
    right: 8.5vh;
    width: 43.2vh;
    height: 2.8vh;
    text-align: right;
}

#donate-panel ul {
    background-color: var(--HEADER-BGCOLOR);
    position: absolute;
    width: 100%;
    z-index: 1;
    list-style-type: none;
    display: flex;
    flex-flow: column nowrap;
    flex-direction:row-reverse;
    text-align: right;
}

#donate-panel li {
    position: relative;
    padding: 1.66vh;
    /*border-top: 1px solid var(--HEADER-COLOR);*/
}

#donate-panel a {
    display: block;
    width: 100%;
    padding-right: 5vh;
}

#donate-panel a:any-link {
    color: var(--HEADER-COLOR);
    font-weight: bold;
    text-decoration: none;
}

#donate-panel a:hover,
#donate-panel a:focus {
    transform: scale(1.2);
    transition: all 0.3s;
}

@media screen and (min-width: 768px) {
    #donate-panel {
        display: block;
    }

    #donate-panel ul {
        flex-flow: row nowrap;
        flex-direction:row-reverse;
        /*border-top: 1px solid var(--HEADER-COLOR);*/
    }

    #donate-panel li {
        border-top: none;
    }

    header:focus-within #donate-panel {
        animation: none;
    }
}

.lang-header {
  font-size: 1.5vh;
  text-align: center;
  position: absolute;
  top: 0vh;
  right: 0vh;
  width: 8.5vh;
  height: 2.8vh;
  cursor: pointer;
}

.custom-select{   
  display: none; 
}

#a{
  padding-left: 0px;
  padding-bottom: 0px;
  margin-bottom: 0vh;
}

#a img, .btn-select img{
  margin-top: 2.5vh;
  margin-bottom: 0px;
  height: 2.7vh;
}

#a li{
  list-style: none;
  padding-top: 0px;
  padding-bottom: 0.7vh;
}

#a li:hover{
 background-color: #F4F3F3;
}

#a li img{
  margin-top: 1.3vh;
}

#a li span{
  position: relative;
  top: 0.67vh;
  margin-left: 0.5vh;
}

.btn-select li span{
  position: relative;
  top: 1.375vh;
  margin-left: 0.5vh;
}

/* item list */

.b{
  display: none;
  width: 100%;
  box-shadow: 0 6px 12px rgba(0,0,0,.175);
  border: 1px solid rgba(0,0,0,.15);
  border-radius: 5px;
}

.open{
  display: show !important;
}

.btn-select{
  width: 100%;
  background-color: rgba(0,0,0,0);
  border: 0px;
  padding-bottom: 0.5vh;
  cursor: pointer;
}
.btn-select li{
  list-style: none;
  float: center;
  padding-bottom: 0px;
}

.btn-select:hover li{
  margin-left: 0px;
}

.btn-select:hover{
  /*background-color: #F4F3F3;*/
  border: 0px;
}

.btn-select:focus{
   outline:none;
}

.lang-select {
  margin-left: 0px;
}

.header
{
  width: 100%; 
  margin-bottom: 2.8%;
}

.text 
{
  width: 99%;
  margin-left: 0.5%;
  margin-right: 0.5%;
}

.values
{
  display: flex;
}


.button-value
{
  background-color:#0090a0;
  border: 1px solid black;
  margin-left: -1px;
}

.button-value:focus {outline:0;}

input[type=number]::-webkit-inner-spin-button {
    opacity: 1
}

</style>
</head>
<body>
<section>
  <p><a href="index.html" class="clip">PrudentGames</a></p>
</section>

<div id="page-header">
<div class="lang-header">
<select class="custom-select">
            <option value="de" data-thumbnail="img/DE.png">DE</option>
            <option value="en" data-thumbnail="img/GB.png">EN</option>
            <option value="ua" data-thumbnail="img/UA.png">UA</option>
      </select>

<div class="lang-select">
<button class="btn-select" value=""></button>
<div class="b">
<ul id="a"></ul>
</div>
</div>
</div>

<div id="donate-panel">
  <ul>
      <li><a href="contact.html" id="contact">Contact</a></li>
      <li><a href="donate.html" id="donate">Donate</a></li>
  </ul>
</div>
</div>

<div class="header">
<div class="text"></div>
</div>

<div class="values">
  <button class="button-value" id="button-value1" onclick="donatevalue(this)">1$</button>
  <button class="button-value" id="button-value2" onclick="donatevalue(this)">2$</button>
  <button class="button-value" id="button-value5" onclick="donatevalue(this)">5$</button>
</div> 

<form action="https://www.paypal.com/donate" method="post" id="paypalform" target="_blank" style="height: 5vh;">
 <!-- Identify your business so that you can collect the payments. -->
 <input type="hidden" name="business" value="pveugeny@gmail.com">
 <!-- Specify details about the contribution -->
 <input type="hidden" name="no_recurring" value="0">
 <input type="hidden" name="item_name" value="prudentgames">
 <input name="amount" id="geldamount" value="1.00" min="0" max="100" type="number" style="vertical-align: top; height: 3.96vh; margin-top: 0.53vh; text-align: center;">
 <input type="hidden" name="currency_code" value="USD">
 <!-- Display the payment button. -->
 <input type="image" name="submit" id="submit_paypal" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" alt="Donate" onclick="paypaldonate()" style="position: relative; top:0vh; left: 0vw; margin-top: 0.26vh; height: 4.48vh">
 <img alt="" width="1" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" >
</form>

<style>
#liqpayform {
  height: 5vh;
}

#liqpaybutton {
  border-width: 0 !important;
  border-color: transparent;
  display: inline-block !important;
  text-align: center !important;
  padding: 7px 20px !important;
  color: #fff !important;
  font-size: 2vh;
  font-weight: 600;
  font-family: "Open Sans", sans-serif;
  cursor: pointer !important;
  border-radius: 2px;
  background-color: rgba(122,183,43);
  height: 5vh;
}

#liqpayimage {
  vertical-align: middle;
  margin-right: 7;
}

#liqpayimagetext {
  vertical-align: middle;
  color: black;
}
</style>

<form action="https://www.liqpay.ua/api/3/checkout" method="post" id="liqpayform" target="_blank" accept-charset="utf-8">
<input type="hidden" name="data"/>
<input type="hidden" name="signature"/>
<button type="submit" id="liqpaybutton" onmouseover="this.style.opacity='0.5';" onmouseout="this.style.opacity='1';">
<img id="liqpayimage" src="https://static.liqpay.ua/buttons/logo-small.png" alt="Pay button" name="btn_text"/>
<span id="liqpayimagetext">liqpay</span>
</button>
</form>

<script type="text/javascript">
function sha1(msg){function rotate_left(n,s){var t4=(n<<s)|(n>>>(32-s));return t4;};function lsb_hex(val){var str='';var i;var vh;var vl;for(i=0;i<=6;i+=2){vh=(val>>>(i*4+4))&0x0f;vl=(val>>>(i*4))&0x0f;str+=vh.toString(16)+vl.toString(16);}
return str;};function cvt_hex(val){var str='';var i;var v;for(i=7;i>=0;i--){v=(val>>>(i*4))&0x0f;str+=v.toString(16);}
return str;};function Utf8Encode(string){string=string.replace(/\r\n/g,'\n');var utftext='';for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;};var blockstart;var i,j;var W=new Array(80);var H0=0x67452301;var H1=0xEFCDAB89;var H2=0x98BADCFE;var H3=0x10325476;var H4=0xC3D2E1F0;var A,B,C,D,E;var temp;msg=Utf8Encode(msg);var msg_len=msg.length;var word_array=new Array();for(i=0;i<msg_len-3;i+=4){j=msg.charCodeAt(i)<<24|msg.charCodeAt(i+1)<<16|msg.charCodeAt(i+2)<<8|msg.charCodeAt(i+3);word_array.push(j);}
switch(msg_len % 4){case 0:i=0x080000000;break;case 1:i=msg.charCodeAt(msg_len-1)<<24|0x0800000;break;case 2:i=msg.charCodeAt(msg_len-2)<<24|msg.charCodeAt(msg_len-1)<<16|0x08000;break;case 3:i=msg.charCodeAt(msg_len-3)<<24|msg.charCodeAt(msg_len-2)<<16|msg.charCodeAt(msg_len-1)<<8|0x80;break;}
word_array.push(i);while((word_array.length % 16)!=14)word_array.push(0);word_array.push(msg_len>>>29);word_array.push((msg_len<<3)&0x0ffffffff);for(blockstart=0;blockstart<word_array.length;blockstart+=16){for(i=0;i<16;i++)W[i]=word_array[blockstart+i];for(i=16;i<=79;i++)W[i]=rotate_left(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);A=H0;B=H1;C=H2;D=H3;E=H4;for(i=0;i<=19;i++){temp=(rotate_left(A,5)+((B&C)|(~B&D))+E+W[i]+0x5A827999)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=temp;}
for(i=20;i<=39;i++){temp=(rotate_left(A,5)+(B^C^D)+E+W[i]+0x6ED9EBA1)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=temp;}
for(i=40;i<=59;i++){temp=(rotate_left(A,5)+((B&C)|(B&D)|(C&D))+E+W[i]+0x8F1BBCDC)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=temp;}
for(i=60;i<=79;i++){temp=(rotate_left(A,5)+(B^C^D)+E+W[i]+0xCA62C1D6)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=temp;}
H0=(H0+A)&0x0ffffffff;H1=(H1+B)&0x0ffffffff;H2=(H2+C)&0x0ffffffff;H3=(H3+D)&0x0ffffffff;H4=(H4+E)&0x0ffffffff;}
var temp=cvt_hex(H0)+cvt_hex(H1)+cvt_hex(H2)+cvt_hex(H3)+cvt_hex(H4);return temp.toLowerCase();}

var request = {
  public_key: "sandbox_i66699407573",
  version: 3,
  action: "paydonate",
  amount: 0,
  currency: "USD",
  description: "",
  order_id: "000002"
};

const private_key = "sandbox_TvKeiKVjF567fDlV43zIDTiQILZlqmpSgANxHA6b";

function hexdec(hexString) {
    hexString = (hexString + '').replace(/[^a-f0-9]/gi, '')
    return parseInt(hexString, 16)
}

function hex2bin(hexSource) {
    var bin = '';
    for (var i=0;i<hexSource.length;i=i+2) {
        bin += String.fromCharCode(hexdec(hexSource.substr(i,2)));
    }
    return bin;
}

function donatevalue(obj)
{
  var input = document.getElementById('geldamount');
  if(obj.id == "button-value1") input.value = "1.00";
  if(obj.id == "button-value2") input.value = "2.00";
  if(obj.id == "button-value5") input.value = "5.00";
}

function refreshsize() {
  var min = 280, max = 800;
  var clientWidth = document.documentElement.clientWidth;
  var w = clientWidth*0.12;
  if(w<min) w = min;
  if(w>max) w = max;
  document.getElementById('liqpaybutton').style.width = w.toString() + "px";
  document.getElementById('geldamount').style.width = String(0.65*w) + "px";
  document.getElementById('submit_paypal').style.width = String(w/3) + "px";
  document.getElementById('paypalform').style.marginLeft = "calc(50vw - " + String(w/2) + "px)";
  document.getElementById('liqpaybutton').style.marginLeft = "calc(50vw - " + String(w/2) + "px)";
  document.getElementsByClassName("values")[0].style.marginLeft = "calc(50vw - " + String(w/2) + "px)";
  var values = document.getElementsByClassName("button-value");  
  for (var i = 0; i < 3; i++) 
  {
    values[i].style.width = String(w/3) + "px";
  }
}

function paypaldonate(e)
{
  e.preventDefault();
  var myform = document.getElementById('paypalform');
  myform.submit();
}

document.getElementById('liqpaybutton').addEventListener('click', function(e) 
{
  e.preventDefault();
  var myform = document.getElementById('liqpayform');
  request.amount = Number(document.getElementById('geldamount').value);
  request.order_id = String(Math.random());
  var data = btoa(JSON.stringify(request));
  var sign = private_key + data + private_key;
  var hashedSignature = sha1(sign);
  var signature = btoa(hex2bin(hashedSignature));
  //console.save(signature,"test.txt");
  myform.data.value = data;
  myform.signature.value = signature;
  myform.submit();
  return true;
});

</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
var currentlang = "";
const languages = [];
languages.push("de", "en", "ua");
var dict = new Object();
dict["de"] = {};
dict["de"]["donate"] = "Spenden";
dict["de"]["contact"] = "Kontaktieren";
dict["de"]["text"] = "";
dict["en"] = {};
dict["en"]["donate"] = "Donate";
dict["en"]["contact"] = "Contact";
dict["en"]["text"] = "";
dict["ua"] = {};
dict["ua"]["donate"] = "Пожертвувати";
dict["ua"]["contact"] = "Зв'язатися";
dict["ua"]["text"] = "";
var langArray = [];
var langVal = [];
$('.custom-select option').each(function(){
  var img = $(this).attr("data-thumbnail");
  var text = this.innerText;
  var value = $(this).val();
  var item = '<li><img src="'+ img +'" alt="" value="'+value+'"/><span>'+ text +'</span></li>';
  langArray.push(item);
  langVal.push(value);
})

$('#a').html(langArray);

checkCookie();

//change button stuff on click
$('#a li').click(function(){
   var img = $(this).find('img').attr("src");
   var value = $(this).find('img').attr('value');
   var text = this.innerText;
   var item = '<li><img src="'+ img +'" alt="" /><span>'+ text +'</span></li>';
  $('.btn-select').html(item);
  $('.btn-select').attr('value', value);
  $(".b").toggle();
  //console.log(value);
  setCookie("language", value, 365);
  setLanguage(value);
});

$(".btn-select").click(function(){
        $(".b").toggle();
    });
    
//check local storage for the lang
var sessionLang = localStorage.getItem('lang');
if (sessionLang){
  //find an item with value of sessionLang
  var langIndex = langArray.indexOf(sessionLang);
  $('.btn-select').html(langArray[langIndex]);
  $('.btn-select').attr('value', sessionLang);
} else {
   var langIndex = langArray.indexOf('ch');
  console.log(langIndex);
  $('.btn-select').html(langArray[langIndex]);
  //$('.btn-select').attr('value', 'en');
}  

function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
  let expires = "expires="+d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function setLanguage(lang) {
  //alert(dict[lang]["donate"]);
  currentlang = lang;
  document.getElementById("donate").innerHTML = dict[lang]["donate"];
  document.getElementById("contact").innerHTML = dict[lang]["contact"];
}

function getCookie(cname) {
  let name = cname + "=";
  let ca = document.cookie.split(';');
  for(let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

function checkCookie() {
  let lang = getCookie("language");
  if (lang == "") 
  {
    //Set the button value to the first el of the array
    lang = langVal[1];
    $('.btn-select').html(langArray[1]);
    $('.btn-select').attr(lang);
    setCookie("language", lang, 365);
    setLanguage(lang);
    return;
  }
  for (let i = 0; i < langVal.length; i++) 
  {
    if(lang != langVal[i]) continue;
    $('.btn-select').html(langArray[i]);
    $('.btn-select').attr(langVal[i]);
    setLanguage(langVal[i]);
    break;
  }
}

(function(console){

    console.save = function(data, filename){

        if(!data) {
            console.error('Console.save: No data')
            return;
        }

        if(!filename) filename = 'console.json'

        if(typeof data === "object"){
            data = JSON.stringify(data, undefined, 4)
        }

        var blob = new Blob([data], {type: 'text/json'}),
            e    = document.createEvent('MouseEvents'),
            a    = document.createElement('a')

        a.download = filename
        a.href = window.URL.createObjectURL(blob)
        a.dataset.downloadurl =  ['text/json', a.download, a.href].join(':')
        e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)
        a.dispatchEvent(e)
    }
})(console);

window.addEventListener('resize', function() {
  refreshsize();
});

window.addEventListener('load', function() {
  refreshsize();
});

</script>

</body>
</html>
